#!/bin/env sh

_TARGET="Fuptcha";
_GCC_PATH="/usr/bin/gcc";
_LEPTONICA_PATH="/usr/include/leptonica";
_TESSERACT_PATH="/usr/include/tesseract";

function dep_ok 
{
    echo -e "☑️ \e[32m$1 is installed in '$2'\e[39m";
}

function dep_err
{
    echo -e "☐ \e[31mThe $1 are missing in your OS\e[39m";
}

echo -e "Checking for Fuptcha dependencies...\n";

_DEP_NAME="GCC Compiler";

if [[ -f $_GCC_PATH  ]]
then
    dep_ok "$_DEP_NAME" "$_GCC_PATH";
else
    dep_err "$_DEP_NAME";
    HAS_DEPENDENCIE=true;
fi

_DEP_NAME="Leptonica lib";

if [[ -d $_LEPTONICA_PATH  ]]
then
    dep_ok "$_DEP_NAME" "$_LEPTONICA_PATH";
else
    dep_err "$_DEP_NAME";
    HAS_DEPENDENCIE=true;
fi

_DEP_NAME="Tesseract lib";

if [[ -d $_TESSERACT_PATH  ]]
then
    dep_ok "$_DEP_NAME" "$_TESSERACT_PATH";
else
    dep_err "$_DEP_NAME";
    HAS_DEPENDENCIE=true;
fi

if [[ "$HAS_DEPENDENCIE" == true ]]
then
    echo -e "\nYou need install all dependencies before make $_TARGET!\n";
    exit 1;
fi

echo -e "\nAll $_TARGET dependencies are Ok!\n";
